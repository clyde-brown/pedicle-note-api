# Pedicle Note 진료 차트(Clinical Chart) 디자인 컨셉 가이드

## 1. UX 컨텍스트 및 인지 모델 분석

### 1.1 의사의 인지 상태 분석

#### 진료 중 인지 부하 패턴
- **상태**: 환자와의 대화와 시스템 입력을 병행하는 이중 주의(Divided Attention) 상태
- **중단 빈도**: 평균 3-5분마다 간호사 호출, 전화, 환자 추가 질문으로 인한 작업 중단 발생
- **회복 시간**: 중단 후 이전 작업 맥락을 회복하는데 평균 23초 소요
- **인지 우선순위**: 환자 관찰(1순위) → 임상적 판단(2순위) → 기록 작성(3순위)

#### 환경적 제약
- **물리적 환경**
  - 진료실: 고조도(500-1000 lux) 환경에서 모니터 눈부심 위험
  - 야간 당직실: 저조도(50-100 lux) 환경에서 화면 피로도 증가
  - 회진 중: 태블릿/노트북 한 손 조작, 시선은 환자에게 고정
- **시간적 압박**: 환자당 평균 5-7분 진료 시간 내 모든 기록 완료 압박
- **도구 전환**: 청진기 → 키보드 → 펜 → 마우스 간 빈번한 도구 전환

#### 정보 신뢰도 계층
1. **직접 관찰 데이터**: 의사가 직접 확인한 신체 소견 (최고 신뢰도)
2. **환자 진술 데이터**: 환자가 보고한 증상 (중간 신뢰도, 검증 필요)
3. **AI 추출 데이터**: 시스템이 추론한 정보 (낮은 신뢰도, 확인 필수)

### 1.2 진료 워크플로우 시뮬레이션

```
[환자 입실] → "어디가 불편하세요?" (Situation 시작)
    ↓
[주증상 청취] → 머릿속 S-T-D 매핑 시작
    ↓
[신체 검진] → 객관적 데이터로 주관적 증상 검증
    ↓
[잠정 진단] → ICD 후보 머릿속 추론
    ↓
[치료 계획] → Treatment 축 구성
    ↓
[예후 설명] → Duration 축 설정
    ↓
[기록 정리] → 전체 S-T-D 재구성 및 문서화
```

**핵심 통찰**: 의사는 이미 머릿속에서 S-T-D를 완성한 후 시스템에 '전사'하는 것이지, 시스템을 보며 S-T-D를 '작성'하는 것이 아님

## 2. 핵심 디자인 원칙

### 2.1 철학 1: Natural Flow Preservation (자연스러운 진료 흐름 보존)
- **원칙**: 시스템이 진료 흐름을 주도하지 않고, 의사의 사고 흐름을 따라간다
- **구현**: 질문 순서를 강제하지 않고, 어느 지점에서든 진입/이탈 가능한 유연한 구조
- **금지**: 단계별 위저드, 필수 입력 강제로 인한 흐름 차단

### 2.2 철학 2: Cognitive Offloading (인지 부담 외부화)
- **원칙**: 기억해야 할 정보를 시각화하여 작업 기억(Working Memory) 부담 최소화
- **구현**: 입력 중인 S-T-D 맥락을 항상 주변부에 표시, 이전 진료 기록 즉시 참조 가능
- **금지**: 여러 페이지를 오가며 정보를 기억해야 하는 구조

### 2.3 철학 3: Progressive Confidence (점진적 확신도)
- **원칙**: 불확실한 상태에서 시작하여 점차 확신을 높여가는 진료 과정 반영
- **구현**:
  - "의심", "추정", "확진" 단계별 표현 허용
  - 임시 저장 상태를 기본으로, 명시적 확정 액션 분리
  - 모든 입력값에 "?" 마커 허용
- **금지**: 처음부터 확정적 진단 요구, 불완전한 정보 입력 차단

### 2.4 철학 4: Interrupt-Resilient Design (중단 복원력)
- **원칙**: 언제 중단되어도, 언제 돌아와도 마지막 상태 완벽 보존
- **구현**:
  - 모든 키 입력마다 자동 저장 (Debounce 300ms)
  - 마지막 편집 위치 하이라이트
  - "마지막 작업: [시간] 전" 표시
- **금지**: 저장하지 않고 이탈 시 데이터 손실, 세션 타임아웃으로 인한 작업 소실

## 3. 시각적 가이드 및 패턴 (Judgment Criteria)

### 3.1 조도/환경 대응 전략

#### 적응형 명도 대비 시스템
```
고조도 환경 (진료실)
- 배경: #F8F9FA (밝은 회색)
- 주요 텍스트: #212529 (진한 검정)
- 대비율: 15:1 이상

저조도 환경 (야간 당직)
- 배경: #1A1D23 (어두운 남색)
- 주요 텍스트: #E9ECEF (밝은 회색)
- 대비율: 12:1 이상

전환 시점: 환경 광센서 또는 시간대 기반 자동 전환
```

#### 정보 계층별 시각적 무게
1. **긴급 정보** (생체 징후 이상): 붉은 배경 + 굵은 테두리
2. **현재 작업** (입력 중인 필드): 파란 포커스 링 + 미세 진동
3. **맥락 정보** (이전 진료): 회색 톤 + 작은 폰트
4. **보조 기능** (도구/옵션): 최소 대비 + 호버 시에만 강조

### 3.2 데이터 출처 구분 시각화

```
직접 입력 데이터
[의사 아이콘] 검은 텍스트, 실선 테두리
"의사가 직접 확인함"

환자 보고 데이터
[대화 아이콘] 파란 텍스트, 점선 테두리
"환자 진술 기반"

AI 추출/추론 데이터
[AI 아이콘] 회색 텍스트, 점선 테두리 + 물결 밑줄
"시스템 추천 - 확인 필요" 툴팁
```

### 3.3 권장 패턴 (Do)

#### Pattern 1: Contextual Quick Entry (맥락적 빠른 입력)
```
주증상 입력 시작 → 자동완성 드롭다운 →
최근 5개 유사 증상 우선 표시 →
Enter로 선택 + Tab으로 다음 필드 이동
```

#### Pattern 2: Inline Expansion (인라인 확장)
```
기본 상태: [두통] [2일 전부터]
호버/클릭: [두통 - 박동성, 편측성, 중등도] [2일 전부터 - 오전 악화]
```

#### Pattern 3: Ambient Information (주변부 정보 표시)
```
화면 우측 20%: 고정된 S-T-D 요약 패널
- 현재까지 입력된 핵심 정보 실시간 업데이트
- 누락된 필수 정보 옅은 표시
- 충돌하는 정보 경고 아이콘
```

#### Pattern 4: Smart Defaults (똑똑한 기본값)
```
이전 진료 패턴 학습 → 자주 사용하는 조합 우선 제안
예: 요통 선택 시 → "급성/만성?" 자동 질문
    급성 선택 시 → "외상력?" 자동 질문
```

### 3.4 안티 패턴 (Don't)

#### Anti-Pattern 1: Tab Segregation (탭 분리)
```
❌ 금지: [증상 탭] [원인 탭] [치료 탭] [경과 탭]
이유: 탭 전환 시 맥락 손실, 전체 그림 파악 불가
```

#### Anti-Pattern 2: Modal Cascade (모달 중첩)
```
❌ 금지: 증상 선택 팝업 → 부위 선택 팝업 → 강도 선택 팝업
이유: 깊은 모달 스택으로 인한 방향 감각 상실
```

#### Anti-Pattern 3: Validation Prison (검증 감옥)
```
❌ 금지: "필수 항목을 모두 입력하세요" + 진행 차단
이유: 진료 중 유연한 정보 수집 방해
```

#### Anti-Pattern 4: Save Anxiety (저장 불안)
```
❌ 금지: 단일 저장 버튼 + "저장하지 않은 변경사항이 있습니다"
이유: 지속적인 저장 압박감, 실수 시 대량 데이터 손실 위험
```

## 4. S-T-D 모델의 시각화 원칙

### 4.1 공간적 배치 전략

```
[화면 구성]
┌─────────────────────────────────────┐
│  Current Context Bar (현재 환자/진료) │
├──────────────┬──────────────────────┤
│              │                      │
│   Primary    │    S-T-D Summary     │
│   Input      │    (실시간 업데이트)   │
│   Area       │                      │
│   (70%)      │  ┌─ Situation ────┐  │
│              │  │ 요통, L4-5      │  │
│              │  │ 3일 전 시작      │  │
│              │  └────────────────┘  │
│              │                      │
│              │  ┌─ Treatment ────┐  │
│              │  │ (대기 중)       │  │
│              │  └────────────────┘  │
│              │                      │
│              │  ┌─ Duration ─────┐  │
│              │  │ (대기 중)       │  │
│              │  └────────────────┘  │
└──────────────┴──────────────────────┘
```

### 4.2 시간축 표현

#### Timeline Visualization (NOT Tabs)
```
과거 ←────────────[현재]────────────→ 미래
        발병            내원    치료시작   예상회복
         3일 전          오늘     오늘      2주 후

[시각적 구현]
- 수평 타임라인 막대
- 드래그로 시점 조정 가능
- 핀치 줌으로 스케일 조정
```

### 4.3 데이터 밀도 관리

```
Level 1 (Overview): 한 줄 요약
"요통 / 물리치료 / 2주"

Level 2 (Expanded): 구조화된 핵심 정보
Situation: 요통, L4-5, 급성, VAS 6/10
Treatment: 물리치료 10회, NSAIDs
Duration: 2주 예상, 1주 후 재평가

Level 3 (Detailed): 전체 상세 정보
[클릭하여 전체 보기]
```

## 5. Question-driven UX 구현 전략

### 5.1 자연어 질문 시퀀스

진료 단계별 핵심 질문 매핑:

```javascript
const questionFlow = {
  initial: "어디가 불편하신가요?",

  symptoms: {
    primary: "가장 불편한 증상은 무엇인가요?",
    location: "정확히 어느 부위인가요?",
    onset: "언제부터 시작되었나요?",
    character: "어떤 양상인가요?" // Optional expand
  },

  context: {
    trigger: "특별한 계기가 있었나요?", // Optional
    pattern: "언제 더 심해지나요?", // Optional
  },

  examination: {
    finding: "검사에서 확인된 것은?",
    severity: "객관적 중증도는?"
  }
}
```

### 5.2 입력 인터페이스 변환

```
[기존 폼 방식 - 지양]
┌─────────────────────┐
│ 증상: [___________] │
│ 부위: [___________] │
│ 기간: [___________] │
└─────────────────────┘

[질문 중심 방식 - 권장]
"어디가 불편하신가요?"
→ [자유 입력 필드 + 음성 입력 버튼]
→ 입력 즉시 자연어 처리
→ "허리"라고 입력 시 → 자동으로 S축의 anatomy에 매핑
→ 옵션: "더 구체적으로" 버튼으로 세부 입력 확장
```

### 5.3 Conversational Input Pattern

```
의사: "허리 통증 3일째" 입력
시스템: 자동 파싱 →
  - Situation.symptom = "통증"
  - Situation.anatomy = "요추부"
  - Situation.onset = "3일 전"

시각적 피드백:
[허리 통증] [3일째] 태그 생성
각 태그 클릭 시 수정 가능
```

## 6. Progressive Disclosure 실제 적용

### 6.1 단계별 정보 노출 전략

#### Stage 1: Minimal Entry (최소 진입점)
```
┌────────────────────────────────┐
│ 📝 진료 시작                     │
│                                │
│ "주 증상을 간단히 입력하세요"      │
│ [                            ] │
│                                │
│ 또는 [음성 입력] [이전 진료 참조] │
└────────────────────────────────┘
```

#### Stage 2: Smart Expansion (스마트 확장)
```
입력: "두통"
↓
시스템 자동 확장 제안:
┌────────────────────────────────┐
│ 두통이 있으시군요.               │
│                                │
│ ⚡ 빠른 추가 정보 (선택사항)      │
│ • 위치: [전두부] [측두부] [후두부] │
│ • 양상: [박동성] [압박감] [찌르는] │
│ • 강도: [경도] [중등도] [중증]    │
│                                │
│ [건너뛰기]        [자세히 기록]   │
└────────────────────────────────┘
```

#### Stage 3: Deep Dive (심화 기록)
"자세히 기록" 선택 시에만 노출:
- 악화/완화 요인
- 동반 증상
- 과거 유사 증상력
- 가족력
- ROS (Review of Systems)

### 6.2 Cognitive Load Management

```
정보 표시 우선순위:
1. Always Visible (항상 표시)
   - 현재 작업 중인 필드
   - 입력된 핵심 정보 요약

2. On-Demand (요청 시 표시)
   - 이전 진료 기록
   - 검사 결과
   - 약물 이력

3. Hidden Until Needed (필요시까지 숨김)
   - 고급 옵션
   - 드문 진단 코드
   - 관리자 기능
```

## 7. 구조화 데이터와 자유 서술의 융합

### 7.1 Hybrid Input Model

```
[Structured + Free Text 병합]
┌─────────────────────────────────────┐
│ 통증 부위: [요추부 ▼] L4-5 level     │
│            └─ 구조화 └─ 자유 서술     │
│                                     │
│ 통증 양상: [급성 ▼] "앉았다 일어날 때" │
│                                     │
│ 통증 강도: [VAS 6 ●────────] 활동 시 8 │
│                              안정 시 4 │
└─────────────────────────────────────┘

모든 구조화 필드 옆에 자유 텍스트 보충 허용
구조화 선택이 애매한 경우 "기타" + 서술 조합
```

### 7.2 Natural Language Understanding Layer

```
자유 입력: "어제부터 왼쪽 어깨가 찌릿찌릿하고 팔 들기 힘들어요"

시스템 파싱 결과:
┌──────────────────────────────┐
│ 🤖 이렇게 이해했습니다:        │
│                              │
│ • 부위: 좌측 견관절           │
│ • 증상: 방사통, 운동 제한      │
│ • 발생: 1일 전               │
│                              │
│ [✓ 확인] [수정]              │
└──────────────────────────────┘
```

### 7.3 Confidence Indicators

```
확신도 표시 시스템:
● 확정 (의사가 직접 확인)
◐ 추정 (환자 진술 기반)
○ 의심 (추가 확인 필요)

예시:
통증 부위: ● L4-5 (촉진으로 확인)
발생 시점: ◐ 3일 전 (환자 진술)
원인: ○ 과사용 추정 (확인 필요)
```

## 8. 자동 저장과 심리적 안전감

### 8.1 Transparent Auto-save

```
저장 상태 인디케이터:
┌────────────────────────┐
│ 💚 자동 저장 완료 (1초 전) │
└────────────────────────┘

입력 중: 🔄 (회전 아이콘)
저장 중: 💛 (노란 점)
저장 완료: 💚 (초록 체크)
오프라인: 🔴 + "오프라인 - 로컬 저장 중"
```

### 8.2 Draft State Communication

```
┌─────────────────────────────────┐
│ 📝 임시 저장 상태                 │
│ 안심하세요. 모든 입력이 보존됩니다.  │
│                                 │
│ [진료 확정하기] - 나중에 하셔도 됩니다│
└─────────────────────────────────┘
```

### 8.3 Undo/Redo with History

```
실행 취소 스택 (최근 10개 액션):
[Ctrl+Z] 되돌리기: "통증 강도 6 → 7"
[Ctrl+Y] 다시하기: "부위 추가: L5-S1"

히스토리 타임라인:
14:32 - 진료 시작
14:33 - 증상 입력
14:35 - 신체검사 추가 ← 현재 여기
14:36 - (예정) ICD 매핑
```

## 9. 키보드 기반 인터랙션

### 9.1 Essential Shortcuts

```
필수 단축키 (의사 테스트 그룹 피드백 반영):

Tab: 다음 필드
Shift+Tab: 이전 필드
Enter: 자동완성 선택 / 다음 섹션
Esc: 입력 취소 / 팝업 닫기

Ctrl+S: 명시적 저장 (심리적 안정감)
Ctrl+Space: 자동완성 트리거
Ctrl+1,2,3: S, T, D 섹션 점프
Ctrl+/: 단축키 도움말

F2: 음성 입력 시작/중지
F3: 이전 진료 참조
F4: ICD 검색
```

### 9.2 Keyboard-first Navigation

```
포커스 이동 시각화:
┌──[1]────────────────┐
│ 증상: [___________] │ ← 굵은 파란 테두리
├──[2]────────────────┤
│ 부위: [___________] │ ← 다음 포커스 예고 (옅은 파랑)
└─────────────────────┘

Tab 키 누름 시 부드러운 전환 애니메이션
포커스 링 두께: 3px (표준 2px보다 두껍게)
```

### 9.3 Voice Input Integration

```
음성 입력 모드:
┌──────────────────────────────┐
│ 🎤 음성 입력 중...            │
│ "허리 통증 3일째 악화"         │
│ ────────────────────         │
│ [일시정지] [완료]             │
└──────────────────────────────┘

음성 입력 → 텍스트 변환 → 자동 구조화
의료 용어 특화 음성 인식 모델 사용
```

## 10. 정보 구조와 인터랙션 흐름

### 10.1 Information Architecture

```
진료 차트 정보 계층:

Level 0: Patient Context
└── Level 1: Current Encounter
    ├── Level 2: Situation Axis
    │   ├── Symptoms (자유-구조 혼합)
    │   ├── Physical Exam (구조화 위주)
    │   └── Imaging (구조화 + 판독)
    ├── Level 2: Treatment Axis
    │   ├── Medications
    │   ├── Procedures
    │   └── Therapy Plans
    └── Level 2: Duration Axis
        ├── Expected Course
        ├── Follow-up Schedule
        └── Recovery Milestones
```

### 10.2 State Transitions

```
차트 상태 전환 다이어그램:

[Empty] → 첫 입력 → [Draft]
                      ↓ ↑ (자유 편집)
                   [Modified]
                      ↓
                   [Ready to Confirm]
                      ↓
                   [Confirmed] → [Locked after 24h]
```

### 10.3 Error Prevention & Recovery

```
실수 방지 메커니즘:

1. Soft Warnings (작업 방해 없음)
   "L4-5와 L5-S1을 모두 선택하셨네요. 의도하신 건가요?"

2. Smart Confirmations (중요 시점만)
   "다른 환자 차트로 이동하시겠습니까?
    현재 작업은 자동 저장됩니다."

3. Quick Recovery (1-클릭 복구)
   "방금 삭제한 신체검사 기록 [복원하기]"
```

## 11. 디자이너를 위한 판단 질문 체크리스트

진료 차트 화면 설계 시 각 요소별 자가 점검:

### 전체 레이아웃 검토
- [ ] Q1: 이 화면은 '판단'을 위한가, '입력'을 위한가?
  - 판단 > 입력이어야 함. 정보 표시 70% : 입력 30% 비율 권장

- [ ] Q2: 의사가 환자와 눈을 맞추면서도 조작 가능한가?
  - 주요 입력 영역이 화면 중앙-상단에 위치해야 함
  - 큰 클릭 영역(최소 44px), 명확한 포커스 상태

### 정보 설계 검토
- [ ] Q3: 지금 보여주는 정보가 현재 판단에 꼭 필요한가?
  - 불필요한 히스토리, 메타데이터는 Progressive Disclosure로 숨김

- [ ] Q4: 이 정보는 나중에 입력해도 되는가?
  - 선택적 필드는 시각적으로 구분 (옅은 회색, 점선 테두리)

### 인터랙션 검토
- [ ] Q5: 실수했을 때 1초 안에 복구가 가능한가?
  - Undo 단축키, 인라인 수정, 삭제 후 복원 링크 필수

- [ ] Q6: 이 UI가 진료 흐름을 끊을 가능성은 없는가?
  - 모달/팝업 최소화, 페이지 전환 없는 인라인 작업

### 데이터 안전성 검토
- [ ] Q7: 중단되어도 데이터가 보존되는가?
  - 자동 저장 인디케이터, 로컬 스토리지 백업

- [ ] Q8: 입력 데이터의 신뢰도가 명확히 구분되는가?
  - 직접 관찰 vs 환자 진술 vs AI 추론 시각적 구분

## 12. 디자인 결정과 원칙의 연결

### 12.1 Decision → Principle 매핑

| 디자인 결정 | 연결된 원칙 | 이유 |
|-----------|------------|------|
| S-T-D를 탭으로 분리하지 않음 | 한 화면 = 한 판단 단위 | 전체 맥락을 유지하며 입력 |
| 모든 필드에 "?" 마커 허용 | 완벽보다 빠른 기록 우선 | 불확실해도 일단 기록 가능 |
| 우측 20% 고정 요약 패널 | 기억 요구 않고 인지 지원 | 입력 내용 실시간 확인 |
| 300ms 디바운스 자동저장 | 실수는 막고 복구는 쉽게 | 데이터 손실 원천 차단 |
| 질문형 인터페이스 | 의사는 입력자 아닌 판단자 | 자연스러운 진료 대화 반영 |

### 12.2 Feature → Philosophy 추적

| 기능 ID | 구현 방식 | 철학적 근거 |
|--------|----------|------------|
| F005 (Situation 입력) | 자연어 입력 → 자동 파싱 | Natural Flow Preservation |
| F008 (ICD 자동제안) | 비침습적 추천 (우측 패널) | Cognitive Offloading |
| F012 (진료기록 저장) | 암묵적 자동저장 + 명시적 확정 분리 | Progressive Confidence |
| F013 (진료기록 수정) | 인라인 편집 + 변경이력 추적 | Interrupt-Resilient Design |

## 13. 구현 우선순위 가이드

### Phase 1: Core Experience (MVP)
1. 자연어 주증상 입력 인터페이스
2. 자동 저장 메커니즘
3. S-T-D 통합 뷰 (탭 없음)
4. 키보드 네비게이션

### Phase 2: Intelligence Layer
1. 자연어 파싱 및 구조화
2. ICD 자동 제안
3. 이전 진료 패턴 학습

### Phase 3: Advanced Features
1. 음성 입력
2. 실시간 협진 공유
3. AI 기반 이상 소견 감지

---

*이 문서는 디자이너가 진료 차트 화면을 설계할 때 의사결정의 나침반 역할을 하는 '사고의 도구'입니다. 구체적인 픽셀 단위 시안이 아닌, 설계 철학과 판단 기준을 제공합니다.*

*마지막 업데이트: 2024.01*
*작성자: Pedicle Note Design Strategy Team*